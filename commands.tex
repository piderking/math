%!root = main.tex

\tcbuselibrary{breakable}

% --- Week Counter ---
\newcounter{weekcounter}
\setcounter{weekcounter}{0}

% --- Dark Theme ---
\pagecolor{black!97}
\color{white}

% --- Accent Colors ---
\definecolor{boxgray}{RGB}{40,40,40}
\definecolor{accentblue}{RGB}{90,160,220}
\definecolor{accentgreen}{RGB}{80,200,120}
\definecolor{accentorange}{RGB}{255,160,60}
\definecolor{accentborder}{RGB}{140,140,140}

% --- Week / Section ---
\newcommand{\test}[1]{%
  \refstepcounter{weekcounter}%
  \section*{Practice Test \theweekcounter: #1}%
  \addcontentsline{toc}{section}{Practice Test \theweekcounter: #1}%
}

% --- TMV / GPA (unnumbered but in TOC) ---
\newcommand{\tmv}[1][]{%
  \vspace{1em}%
  \noindent
  \fcolorbox{accentborder}{black!97}{\textbf{TMV: #1}}%
  \par\vspace{0.5em}%
  \addcontentsline{toc}{subsection}{TMV: #1}%
}
% --- TMV / GPA (unnumbered but in TOC) ---
\newcommand{\ps}[1][]{%
  \vspace{1em}%
  \noindent
  \fcolorbox{accentborder}{black!97}{\textbf{Problem Set: #1}}%
  \par\vspace{0.5em}%
  \addcontentsline{toc}{subsection}{Section: #1}%
}

% --- Problem / Step Counters ---
\newcounter{problem}[weekcounter]
\renewcommand{\theproblem}{\theweekcounter.\arabic{problem}}

\newcounter{step}[problem]
\renewcommand{\thestep}{\theproblem.\arabic{step}}

% --- Problem Box ---
\newtcolorbox{problemBox}[1][]{
  breakable,
  colback=boxgray,
  colframe=accentblue,
  fonttitle=\bfseries,
  coltitle=white,
  title=Problem~\theproblem:~#1,
  sharp corners,
  boxrule=0.7pt,
  left=6pt,right=6pt,top=4pt,bottom=4pt,
  coltext=white
}

% --- Solution Box ---
\newtcolorbox{solutionBox}[1][]{
  breakable,
  colback=boxgray,
  colframe=accentgreen,
  fonttitle=\bfseries,
  coltitle=white,
  title=Solution,
  sharp corners,
  boxrule=0.7pt,
  left=6pt,right=6pt,top=4pt,bottom=4pt,
  coltext=white
}

% --- Step Box ---
\newtcolorbox{stepBox}[1][]{
  breakable,
  colback=boxgray,
  colframe=accentorange,
  fonttitle=\bfseries,
  coltitle=white,
  title=Step~\thestep:~#1,
  sharp corners,
  boxrule=0.7pt,
  left=6pt,right=6pt,top=4pt,bottom=4pt,
  coltext=white
}

% --- Commands ---
\newcommand{\problem}[2][]{%
  \refstepcounter{problem}%
  \addcontentsline{toc}{subsubsection}{Problem~\theproblem: #1}%
  \begin{problemBox}[#1]#2\end{problemBox}%
}

\newcommand{\solution}[1]{% 
  % \addcontentsline{toc}{paragraph}{Solution~\theproblem}%
  \begin{solutionBox}#1\end{solutionBox}%
}

\newcommand{\step}[2][]{%
  \refstepcounter{step}%
  \begin{stepBox}[#1]#2\end{stepBox}%
}

